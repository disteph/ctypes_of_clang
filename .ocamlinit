#use "topfind";;
#directory "_build/src";;
#require "rresult,dolog,humane_re,ppx_deriving.runtime";;
#require "ctypes,ctypes.foreign";;
#require "compiler-libs,ppx_tools,ppx_tools.metaquot";;
#load "ctypes_of_clang.cma";;

module Clang = Coc_clang.Make(struct
  let from = Some Dl.(dlopen ~filename:"/usr/lib/llvm-3.8/lib/libclang.so" ~flags:[RTLD_NOW])
end)
module Cinfo = Coc_info.Make(Clang)
module Cparse = Coc_parse.Make(Clang)
open Coc_runtime

open Rresult.R

(*open Ctypes
open Foreign

open Parsetree
open Ast_helper*)

let pp_loc_t fmt (l : Location.t) = Format.fprintf fmt "<loc>";;
#install_printer pp_loc_t;;
#ppx "./ppx_coc.byte";;
